!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function i(i,s){var o,l,d,r,c,u,h,p,f,m=this.data(),y=this.find("ul"),g=!1;if(m.vals&&0!==y.length){for(i||(i=m.seconds),m.intervalId&&(g=!0,clearTimeout(m.intervalId)),l=(o=Math.floor(i/a))*a,l+=(d=Math.floor((i-l)/n))*n,c=i-(l+=60*(r=Math.floor((i-l)/60))),u=(o<100?"0"+(o<10?"0":""):"")+o+(d<10?"0":"")+d+(r<10?"0":"")+r+(c<10?"0":"")+c,h=m.vals.length-1,p=u.length-1;h>=0;h-=1,p-=1)f=parseInt(u.substr(p,1),10),m.vals[h]=f,y.eq(h).children().html(f);(g||s)&&(m.ttStartTime=t.now(),m.intervalId=setTimeout(e.bind(this),1e3),this.data("intervalId",m.intervalId))}}function e(i){var s,a,n,o,l,d,r,c=this,u=this.find("ul"),h=this.data();return h.vals&&0!==u.length?(void 0===i&&(i=h.iSec),s=h.tickCount+1,this.data("tickCount",s),a=h.vals[i],n=u.eq(i),o=n.children(),l=h.countdown?-1:1,o.eq(1).html(a),a+=l,"function"==typeof this.data("step")&&this.data("tickCount")%this.data("stepCount")==0&&this.data("step")(),i===h.iSec&&(d=h.tickTimeout,r=t.now()-h.ttStartTime,h.sec+=l,d+=Math.abs(h.seconds-h.sec)*d-r,h.intervalId=setTimeout(e.bind(this),d)),a<0||a>h.limits[i]?(a<0?(a=h.limits[i],i===h.iHour&&h.displayDays>0&&0===h.vals[i-1]&&(a=3)):a=0,i>0&&e.call(this,i-1)):!h.countdown&&i===h.iHour&&h.displayDays>0&&2===h.vals[i-1]&&3===h.vals[i]&&(a=0,e.call(this,i-1)),o.eq(0).html(a),t.support.transition?(n.addClass("transition"),n.css({top:0}),setTimeout(function(){n.removeClass("transition"),o.eq(1).html(a),n.css({top:"-"+h.height+"px"}),l>0||i!==h.iSec||(h.sec===h.countdownAlertLimit&&u.parent().addClass("timeTo-alert"),0===h.sec&&(u.parent().removeClass("timeTo-alert"),h.intervalId&&(clearTimeout(h.intervalId),c.data("intervalId",null)),"function"==typeof h.callback&&h.callback()))},410)):n.stop().animate({top:0},400,i!==h.iSec?null:function(){o.eq(1).html(a),n.css({top:"-"+h.height+"px"}),l>0||i!==h.iSec||(h.sec===h.countdownAlertLimit?u.parent().addClass("timeTo-alert"):0===h.sec&&(u.parent().removeClass("timeTo-alert"),h.intervalId&&(clearTimeout(h.intervalId),c.data("intervalId",null)),"function"==typeof h.callback&&h.callback()))}),void(h.vals[i]=a)):(h.intervalId&&(clearTimeout(h.intervalId),this.data("intervalId",null)),void(h.callback&&h.callback()))}var s,a=86400,n=3600,o={callback:null,step:null,stepCount:1,captionSize:0,countdown:!0,countdownAlertLimit:10,displayCaptions:!1,displayDays:0,displayHours:!0,fontFamily:"Verdana, sans-serif",fontSize:0,lang:"en",languages:{},seconds:0,start:!0,theme:"white",width:25,height:30,gap:11,vals:[0,0,0,0,0,0,0,0,0],limits:[9,9,9,2,9,5,9,5,9],iSec:8,iHour:4,tickTimeout:1e3,intervalId:null,tickCount:0},l={start:function(s){var a;s&&(i.call(this,s),a=setTimeout(e.bind(this),1e3),this.data("ttStartTime",t.now()),this.data("intervalId",a))},stop:function(){var t=this.data();return t.intervalId&&(clearTimeout(t.intervalId),this.data("intervalId",null)),t},reset:function(t){var e=l.stop.call(this),s=void 0===t?e.seconds:t;this.find("div").css({backgroundPosition:"left center"}),this.find("ul").parent().removeClass("timeTo-alert"),i.call(this,s,!0)}},d={en:{days:"days",hours:"hours",min:"minutes",sec:"seconds"},ru:{days:"дней",hours:"часов",min:"минут",sec:"секунд"},ua:{days:"днiв",hours:"годин",min:"хвилин",sec:"секунд"},de:{days:"Tag",hours:"Uhr",min:"Minuten",sec:"Secunden"},fr:{days:"jours",hours:"heures",min:"minutes",sec:"secondes"},sp:{days:"días",hours:"horas",min:"minutos",sec:"segundos"},it:{days:"giorni",hours:"ore",min:"minuti",sec:"secondi"},nl:{days:"dagen",hours:"uren",min:"minuten",sec:"seconden"},no:{days:"dager",hours:"timer",min:"minutter",sec:"sekunder"},pt:{days:"dias",hours:"horas",min:"minutos",sec:"segundos"},tr:{days:"gün",hours:"saat",min:"dakika",sec:"saniye"}};return void 0===t.support.transition&&(t.support.transition=void 0!==(s=(document.body||document.documentElement).style).transition||void 0!==s.WebkitTransition||void 0!==s.MozTransition||void 0!==s.MsTransition||void 0!==s.OTransition),t.fn.timeTo=function(){var e,s,r,c,u,h,p,f,m,y,g={},v=t.now();for(e=0;e<arguments.length;e+=1)s=arguments[e],0===e&&"string"==typeof s?c=s:"object"==typeof s?"function"==typeof s.getTime?g.timeTo=s:g=t.extend(g,s):"function"==typeof s?g.callback=s:(r=parseInt(s,10),isNaN(r)||(g.seconds=r));if(g.timeTo)g.timeTo.getTime?u=g.timeTo.getTime():"number"==typeof g.timeTo&&(u=g.timeTo),g.seconds=u>v?Math.floor((u-v)/1e3):0;else if(g.time||!g.seconds)if(u=g.time,u||(u=new Date),"object"==typeof u&&u.getTime)g.seconds=u.getHours()*n+60*u.getMinutes()+u.getSeconds(),g.countdown=!1;else if("string"==typeof u){for(p=u.split(":"),f=0,m=1;p.length;)y=p.pop(),f+=y*m,m*=60;g.seconds=f,g.countdown=!1}return!1!==g.countdown&&g.seconds>a&&void 0===g.displayDays?(h=Math.floor(g.seconds/a),g.displayDays=(h<10?1:h<100&&2)||3):!0===g.displayDays?g.displayDays=3:g.displayDays&&(g.displayDays=g.displayDays>0?Math.floor(g.displayDays):3),this.each(function(){var e,s,a,n,r,u,h,p,f,m,y,v,T,w,I,S,x,b,k,M,C,D=t(this),z=D.data();if(z.intervalId&&(clearInterval(z.intervalId),z.intervalId=null),z.vals)"reset"!==c&&t.extend(z,g);else{if(s=z.opt?z.options:g,e=Object.keys(o).reduce(function(t,i){return Array.isArray(o[i])?t[i]=o[i].slice(0):t[i]=o[i],t},{}),(z=t.extend(e,s)).options=s,z.height=Math.round(100*z.fontSize/93)||z.height,z.width=Math.round(.8*z.fontSize+.13*z.height)||z.width,z.displayHours=!(!z.displayDays&&!z.displayHours),n={fontFamily:z.fontFamily},z.fontSize>0&&(n.fontSize=z.fontSize+"px"),r=z.languages[z.lang]||d[z.lang],D.addClass("timeTo").addClass("timeTo-"+z.theme).css(n),u='<ul style="left:'+Math.round(z.height/10)+"px; top:-"+z.height+'px"><li>0</li><li>0</li></ul></div>',p='<div class="first"'+(h=z.fontSize?' style="width:'+z.width+"px; height:"+z.height+'px;"':' style=""')+">"+u,f="<div"+h+">"+u,m="<span>:</span>",y=Math.round(2*z.width+3),T=(v=z.captionSize||z.fontSize&&Math.round(.43*z.fontSize))?"font-size:"+v+"px;":"",w=v?' style="'+T+'"':"",I=(z.displayCaptions?(z.displayHours?'<figure style="max-width:'+y+'px">$1<figcaption'+w+">"+r.hours+"</figcaption></figure>"+m:"")+'<figure style="max-width:'+y+'px">$1<figcaption'+w+">"+r.min+"</figcaption></figure>"+m+'<figure style="max-width:'+y+'px">$1<figcaption'+w+">"+r.sec+"</figcaption></figure>":(z.displayHours?"$1"+m:"")+"$1"+m+"$1").replace(/\$1/g,p+f),z.displayDays>0){for(S=.4*z.fontSize||o.gap,x=p,a=z.displayDays-1;a>0;a-=1)x+=1===a?f.replace('">',"margin-right:"+Math.round(S)+'px">'):f;I=(z.displayCaptions?'<figure style="width:'+Math.round(z.width*z.displayDays+S+4)+'px">$1<figcaption style="'+T+"padding-right:"+Math.round(S)+'px">'+r.days+"</figcaption></figure>":"$1").replace(/\$1/,x)+I}D.html(I)}if((b=D.find("div")).length<z.vals.length){for(k=z.vals.length-b.length,M=z.vals,C=z.limits,z.vals=[],z.limits=[],a=0;a<b.length;a+=1)z.vals[a]=M[k+a],z.limits[a]=C[k+a];z.iSec=z.vals.length-1,z.iHour=z.vals.length-5}z.sec=z.seconds,D.data(z),c&&l[c]?l[c].call(D,z.seconds):z.start?l.start.call(D,z.seconds):i.call(D,z.seconds)})},t});